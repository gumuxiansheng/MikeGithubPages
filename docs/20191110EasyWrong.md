# 那些显而易错的问题
<!--我为什么错了？我为什么又对了？-->
<!--2019-11-10-->
<!--概率论-->

*成功是能力的体现，失败是运气的结果。*

## 我们从砸金蛋开始

“曾经有一份真诚的爱情摆在我的面前，我却没有去珍惜，等我失去的时候我才后悔莫及，人世间最痛苦的事莫过于此”。

至尊宝说着言不由衷的话，却一语成谶。生活中我们常常面临如是选择：我们本可以，但最终选择了无所作为，然后在事后懊悔不已，就像，错过了一个亿。我们不妨畅想一下，现在有一个亿摆在你的面前，你能珍惜么：

> 你面前有三个金蛋，其中一只金蛋里面有帮你清空购物车的优惠券（假设你事先往购物车中加了价值一个亿的商品），另外两只空空如也。你现在可以挑选一只金蛋来砸，如果砸中了优惠券的蛋，恭喜你，你将晋升蛋皇，并获得购物车中一个亿的商品，否则，你可能只能删空购物车，在双十一毫无贡献。游戏开始，你会选择一只金蛋，在你挑选了一只金蛋之后，主持人会从另外两只蛋中选择一只空蛋杂碎，并给你一次再挑选的机会，你会砸之前选的那只蛋么？

你会有两种选择：换和不换，每种选择将会有两种：中和不中，让我们简单加总一下就知道，会有如下四种情形：

1. 自己选择的蛋，不忘初心，跪着也砸下去。Ooops！砸错了，唉，运气不好。
2. 自己选择的蛋，不忘初心，跪着也砸下去。Wow！赚了赚了，这都靠我坚定的信念。
3. 不要吊死在一棵蛋上，换个蛋砸。F**k！砸错了，我居然放弃了正确答案？我当时一定是鬼迷了心窍，那个我们能不能重来？
4. 不要吊死在一棵蛋上，换个蛋砸。Wow！居然中了，幸亏临阵换蛋，运气真好。

四个简单的结果，我们的反应程度是不一样的，同样的没中，3的反应会比1大很多，1只是一开始就选择了错误的蛋，而3是因为他没有那只珍惜真正的金蛋。（根据禀赋效应，做这样的假设应该符合现状，如果有哪位智士居然不这么认为，您应该知道沉默是金。）

我们做个简单的推理：三个金蛋有优惠券的概率相等，那我选哪一个选中的概率都是1/3，主持人肯定会敲碎了一只空蛋，那剩下那两只蛋一个有，一个没有，每个概率是1/2，既然这样，选择初心不改，中了，皆大欢喜，不中，运气不好。经济人就应该这么选，一锤子买卖，管你主持人抛哪个烟雾蛋出来，潇洒又不失理性，完美。

直到一个人做出了另外一个简单的推理。

我们看看另外一个简单的推理：三个金蛋有优惠券的概率相等，那我选哪一个选中的概率都是1/3，选不中的概率是2/3，也就是说优惠券在另外两只蛋中的概率是2/3，现在主持人帮我排除了一只坏蛋，那剩下的那只蛋有优惠券的概率就是2/3，而我选择的那只概率是1/3。啊咧咧，概率要高100%哦，果断应该换！经济人就该这么选，懂得调整自己的预期，完美。

两个推理公说公有理婆说婆有理，但坚持真相只有一个的小学生终于忍不住在比萨斜塔外的某台计算机上做了一个蒙特卡洛实验（来源于知乎，具体链接找不到了...），终于发现，选择坚持初心的玩家在10000次砸蛋中，砸中的概率是33.3%，而三心二意的玩家在10000次砸蛋中，砸中的概率是66.7%。Hmmm，真相呼之欲出，但小学生陷入了思考：为什么这样子？

小学生眼镜一闪，刹那间（只用了大概半天）就轻松地（只扯掉了几根头发）做出了显而易见（反正也不知道正不正确）的证明：

> 假设，三只金蛋分别为A蛋、B蛋和C蛋，基本事件$U\in{A,B,C}$：优惠券在$U$蛋中。基本事件$\hat{U}, U\in{A, B, C}$：主持人在参与者选择了金蛋之后砸开了$U$蛋（简单起见，这里没有加入选择事件的条件概率）。
依题设，有：$P(A) = P(B) = P(C) = \frac{1}{3}, P(\overline{A}) = P(\overline{B}) = P(\overline{C}) = \frac{2}{3}$。
> 不失一般性，假设第一次选择了A蛋，那么主持人可能砸开$B$蛋或者$C$蛋。
> 根据贝叶斯说的，有
> 
> $$
> P(\hat{C}) = P(\hat{C}|A)P(A) + P(\hat{C}|\overline{A})P(\overline{A}) \\
> P(\hat{B}) = P(\hat{B}|A)P(A) + P(\hat{B}|\overline{A})P(\overline{A})
> $$
> 
> $C$和$B$是参与者选择$A$之后主持人可能砸的两个蛋（不可能砸$A$蛋）。$P(\hat{C}|A)=1/2, P(\hat{C}|\overline{A})=P(\hat{C}|\overline{A}, \overline{C})P(\overline{C}|\overline{A})=1\times1/2=1/2$（$A$中如果有优惠券，主持人会从$B$、$C$中任选一个蛋砸破，如果$A$中没有优惠券，则主持人只能选择剩下的一个空蛋，$C$如果为空蛋，那么选择$C$的概率为1，$C$如果不为空蛋，那选择$C$的概率为0。对$B$同理。）。
> 
> $\Rightarrow P(\hat{C})=P(\hat{B})=\frac{1}{2}$
> 
> 假设主持人现在砸开了$C$蛋，我们的目的是比较$P(A|\hat{C})$和$P(B|\hat{C})$。
> $$P(A|\hat{C})=\frac{P(A, \hat{C})}{P(\hat{C})}, P(A|\hat{B})=\frac{P(A, \hat{B})}{P(\hat{B})}\\ P(A, \hat{C})=P(\hat{C}|A)P(A)= \frac{1}{2} \times \frac{1}{3}=\frac{1}{6} \\ P(A, \hat{B})=P(\hat{B}|A)P(A)=\frac{1}{6}$$
> $\Rightarrow P(A|\hat{C})=P(A|\hat{B})=\frac{1}{3}$
> $$P(B|\hat{C})=\frac{P(B, \hat{C})}{P(\hat{C})} \\ P(B, \hat{C})=P(\hat{C}|B)P(B)=1 \times \frac{1}{3}=\frac{1}{3}$$
> $\Rightarrow P(B|\hat{C})=\frac{2}{3}$
> $\therefore P(A|\hat{C}) < P(B|\hat{C})$
> 即在$C$蛋被砸之后坚持选$A$获得大奖的概率是三分之一，而转而选$B$获得大奖的概率是三分之二。

接下来，你可以砸金蛋了。不过需要提醒你的是，你如果采用以上策略，依然会有1/3的概率错失真蛋，但这不意味着你做出了糟糕的选择，这下，你真的只是运气差罢了。

## 玩玩牌

砸完金蛋之后，你可能很富有，也可能一无所有，没关系，如果你赚钱了，Casino会送你优惠券，让你继续玩下去，如果你一无所有，Casino也会借你筹码，让你负债累累，哦不，让你有机会翻盘。

于是你被拉到了另一张游戏桌上：

> 你面前有三张形状相同但颜色不同的卡片，第一张两面全是红色，第二张两面全是黑色，而第三张是一面红一面黑。将这三张卡片放在帽子里混合后，随机取出一张放在地上。如果取出的这张卡片朝上的一面是红色的，你现在可以押注这张卡片的另一面是什么颜色了。

按惯例，我们来个简单的推理：现在地上这张卡片朝上一面是红色的，那么只有两种情况：1. 两面全红；2. 一面红一面黑，也就是要么是第一张卡片，要么是第二张卡片，而两张卡片被取出的概率是一样的，所以卡片的另一面有一半概率是红色，另一半概率么，我想应该是黑色吧。

你会这么想么？

你按照此推理，很快便走向了下一个问题：赌徒会破产吗？

## 赌徒破产问题

> 两个赌徒，就连续抛掷一枚硬币的结果进行打赌，对于每一个抛掷结果，如果是正面朝上，$B$就支付$A$一元，如果是反面朝上，$A$将支付$B$一元。一直玩下去，直至某一方钱输光。假定连续抛掷的硬币是独立的，且每次正面朝上的概率为$p$（不要问为什么不是$1/2$），开始时$A$有$i$元，$B$有$N-i$元，那么$A$最后能赢得所有钱的概率是多大？

按照惯例，显然可得：

$$
P_{i}=\left\{
\begin{aligned}
    &\frac{1-(q/p)^{i}}{1-(q/p)^{N}}\qquad &如果p\ne\frac{1}{2} \\
    &\frac{i}{N}\qquad &如果p=\frac{1}{2}
\end{aligned}
\right.
$$

两个人玩到天荒地老，宇宙毁灭的可能性为零，而谁会笑道最后，取决于谁更有初始资本，当然，首先你得活得够长。

## 财富分配

上道题让我们知道，初始资本严重影响到我们的生存，只要我们活得够长。那资本的分配又是怎样形成的呢？这让我想起很久很久以前，出现在一个朋友的朋友圈里的问题：

> 假设有1000个人每人有初始资金100元，游戏开始后，每人每一轮将一元钱随机交给另外一个人。（当然，这也意味着自己可能从别人那随机收获一些钱，运气好的话，是999元），如果一个人不幸没钱了，那么善良的Casino当然会大方地伸出援手，让他有机会翻身。那很多很多轮之后，这些钱是怎么分配的？

我们做个简单的推理：每个人初始值都是一样的，每个人每一轮给钱也是随机地，所以，每个人的情况都一样，于是乎，很多很多轮以后，每个人的情况也应该是接近的，也就是差不多100元。

当然，这道题出现在这里说明我们的简单推理当然是错的。

游戏的创始人当然没那么多钱来请1000个人做很多很多轮游戏。于是他们做了个计算机模拟，终于发现，财富出现了极端的两极分化。

看吧，事情果然没那么简单！不过，我们简单的推理实际上是正确的。因为这个计算机模拟出现的情况，符合正态分布，所以呀，每个人情况确实是接近的，他们都有期望为100，方差为某个数的正态分布，只不过有人在左，有人在右，有的人左得有点多，有的人右得有点多。所以，题目实际上相当于说:

> 现在有100000元钱，将其按正态分布随机分给1000个人，最后的财富分配是什么样子的？（当然，这是每个人都还没有接受Casino救助时候的情形）

这么明显的送分题，还需要再解释吗？当然，还得解释下为什么是正态分布，而不是罗利分布，哦不，其他分布。于是我上百度搬来了中心极限定理：**所研究的随机变量如果是有大量独立的而且均匀的随机变量相加而成，那么它的分布将近似于正态分布。** 对于每个人来说，每一轮都是一个独立的随机事件，而其最终财富取决于这些独立随机事件的和，因此，其财富符合正态分布。

刚才加入了限制条件，即每个人还没有接受Casino的救助，也就是没有负债。如果有了负债呢？很明显，中心极限定理所需要的条件依然被满足，因此，还是正态分布，只不过，左的更左（小于0），右的更右（社会上由于借贷就出现了比原始资本更多的钱，我们常常叫它杠杆）。

其实针对关于一个玩家玩到没钱的时候不同的处理，网络上有很多讨论，当玩家玩到没钱的时候可以出局，可以借贷（这里讨论的情况），也可以不给别人钱，但可以接受别人递过来的钱。没钱就出局的情况最后使得所有资金都收拢到两个人手里，而另外一种情况就比较复杂，网络上给出的回答大概是说最大熵分布，这里篇幅有限，就不列举了（隐藏自己没看懂的尴尬），反正也是一种分布。

## 球的问题

这里应该有一个问题，但地方太小，写不下。

## 偶数整数

有始有终果然是件相当困难的事情，只好提个烂大街的问题作为结束：

> 整数集合和偶数集合谁的元素更多？

你应该猜到了，一样多，给个简单的证明：

> 对于每一个整数集合中的元素，乘以二就会出现在偶数集合中，因此，偶数集元素的个数不少于整数集，而偶数又都是整数，所以...显而易见。

